

<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>LabVIEW Core Dumps on Linux Real-Time &#8212; nilrt-docs 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bizstyle.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Obtaining Kernel Logs from a Prior System Crash Via pstore" href="pstore.html" />
    <link rel="prev" title="Logs on NI Linux Real-Time Systems" href="logs.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="pstore.html" title="Obtaining Kernel Logs from a Prior System Crash Via pstore"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="logs.html" title="Logs on NI Linux Real-Time Systems"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">nilrt-docs 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="troubleshooting_index.html" accesskey="U">NI Linux Real-Time Debug Documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">LabVIEW Core Dumps on Linux Real-Time</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="labview-core-dumps-on-linux-real-time">
<h1>LabVIEW Core Dumps on Linux Real-Time<a class="headerlink" href="#labview-core-dumps-on-linux-real-time" title="Permalink to this heading">¶</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>When troubleshooting LabVIEW Real-Time crashes, it is often helpful to understand the memory and instruction stack at the time of the crash. LVRT can be configured to dump this core context to disk when it crashes.</p>
<p>Note that core dumps are not gauaranteed to contain useful information about any particular problem. They are best evaluataed with other contextual information about the system state at the time of the crash. This can include:</p>
<ul class="simple">
<li><p>logs of what the application is doing at the time of the crash.</p></li>
<li><p>simplified reproducing cases.</p></li>
<li><p>context as to what changed when the crash started happening.</p></li>
</ul>
<p>Without this information, the likelihood that a dump file will provide useful information decreases significantly. For example, a core dump may show an access violation due to a bad refrence in the code but it may not show what caused the reference to become bad in the first place. That information can be used to narrow things down but will not give a root cause on its own.</p>
<p>Additionally, reproducing a crash internally to NI is generally preferred. A dump can be unwound externally, but without access to NI symbols, it is unlikely to yield useful information. If the issue is reproduced internally at NI, the same system can be used for both reproducing and unwinding the core dump ensuring that the software versions used for debugging the dump file are consistent.</p>
</section>
<section id="generating-a-core-dump">
<h2>Generating a Core Dump<a class="headerlink" href="#generating-a-core-dump" title="Permalink to this heading">¶</a></h2>
<ol class="arabic">
<li><p>Ensure that the target has software installed, is in run-mode, and will not reboot into safe mode upon reboot. This can be done by verifying the following in NI MAX:</p>
<blockquote>
<div><ul class="simple">
<li><p>Verify that the <code class="docutils literal notranslate"><span class="pre">Status</span></code> of the target in the <code class="docutils literal notranslate"><span class="pre">System</span> <span class="pre">Settings</span></code> tab is currently <code class="docutils literal notranslate"><span class="pre">Connected</span> <span class="pre">-</span> <span class="pre">Running.</span></code></p></li>
<li><p>Verify that the ☐ <code class="docutils literal notranslate"><span class="pre">Force</span> <span class="pre">Safe</span> <span class="pre">Mode</span></code> checkbox is <strong>not</strong> checked in the <code class="docutils literal notranslate"><span class="pre">System</span> <span class="pre">Settings</span></code> tab.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>On the <code class="docutils literal notranslate"><span class="pre">System</span> <span class="pre">Settings</span></code> tab in NI MAX, check the boxes under <code class="docutils literal notranslate"><span class="pre">Startup</span> <span class="pre">Settings</span></code> for both ☑ <code class="docutils literal notranslate"><span class="pre">Enable</span> <span class="pre">Secure</span> <span class="pre">Shell</span> <span class="pre">Server</span> <span class="pre">(sshd)</span></code> and ☑ <code class="docutils literal notranslate"><span class="pre">Enable</span> <span class="pre">Console</span> <span class="pre">Out.</span></code></p></li>
<li><p>Navigate to the <code class="docutils literal notranslate"><span class="pre">/var/local/natinst/log/</span></code> directory either remotely or via a terminal and remove any existing core dumps.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>admin@NI-cRIO-9036-01D5AED5:~# <span class="nb">cd</span> /var/local/natinst/log
admin@NI-cRIO-9036-01D5AED5:/var/local/natinst/log# ls
SystemWebServer.log
core_dump.!usr!local!natinst!labview!lvrt
errlog.txt
lvlog01-20-20-21-27-51.txt
lvlog01-20-20-21-29-47.txt
lvlog01-20-20-21-35-13.txt
lvlog01-20-20-21-37-03.txt
lvrt_19.0_lvuser_cur.txt
lvrt_19.0_lvuser_log.txt
admin@NI-cRIO-9036-01D5AED5:/var/local/natinst/log# rm core_dump.<span class="se">\!</span>usr<span class="se">\!</span>local<span class="se">\!</span>natinst<span class="se">\!</span>labview<span class="se">\!</span>lvrt
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<section id="configuring-lvrt">
<h3>Configuring LVRT<a class="headerlink" href="#configuring-lvrt" title="Permalink to this heading">¶</a></h3>
<p>LabVIEW Real-Time core dumps are disabled by default, as they can consume a substantial amount of disk space. You can enable them using the following methods.</p>
<section id="lvrt-23-1">
<h4>LVRT &gt;= 23.1<a class="headerlink" href="#lvrt-23-1" title="Permalink to this heading">¶</a></h4>
<p>Beginning with the LV 23.1 release, LVRT is configured to <em>not</em> produce core dumps unless the <code class="docutils literal notranslate"><span class="pre">[LVRT]EnableCoreDumps</span></code> <cite>ni-rt.ini</cite> token is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>; enable it with the following command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nirtcfg --set <span class="nv">section</span><span class="o">=</span>LVRT,token<span class="o">=</span>EnableCoreDumps,value<span class="o">=</span><span class="nb">true</span>

nirtcfg --list <span class="p">|</span> grep EnableCoreDumps  <span class="c1"># confirm</span>
</pre></div>
</div>
<p>Restart the NI Linux Real-Time target to apply the change in settings.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The token value is tested by the <code class="docutils literal notranslate"><span class="pre">/etc/init.d/lvrt-wrapper</span></code> initscript during boot.</p>
</div>
<p>On NILRT ARM distributions, the system-wide core dump ulimit is set to <code class="docutils literal notranslate"><span class="pre">0</span></code>. Even after you enable the INI token above, you must then follow the <a class="reference internal" href="#id1">LVRT &lt; 23.1</a> instructions below to enable <code class="docutils literal notranslate"><span class="pre">unlimited</span></code> core dumps.</p>
</section>
<section id="id1">
<h4>LVRT &lt; 23.1<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h4>
<p>Prior to LVRT 23.1, LVRT’s core dump controls are entirely controlled using the <code class="docutils literal notranslate"><span class="pre">/etc/init.d/lvrt-wrapper</span></code> initscript.</p>
<p>Modify the <code class="docutils literal notranslate"><span class="pre">/etc/init.d/lvrt-wrapper</span></code> file in a text editor via FTP, sFTP, WebDAV, or directly on the target. Uncomment the following item in the file as described by the comments in the file:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># core file size</span>
<span class="c1"># uncomment to enable core dumps</span>
<span class="c1">#ulimit -c unlimited</span>
</pre></div>
</div>
</div></blockquote>
<p>Restart the NI Linux Real-Time target to apply the change in settings.</p>
</section>
</section>
<section id="saving-a-core-dump">
<h3>Saving a Core Dump<a class="headerlink" href="#saving-a-core-dump" title="Permalink to this heading">¶</a></h3>
<ol class="arabic">
<li><p>With core dumps enabled, reproduce the crash.</p></li>
<li><p>Confirm that a core dump is now present in <code class="docutils literal notranslate"><span class="pre">/var/local/natinst/log/</span></code>. The core dump should have a name similar to <code class="docutils literal notranslate"><span class="pre">core_dump.!usr!local!natinst!labview!lvrt</span></code>.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>admin@NI-cRIO-9036-01D5AED5:~# ls /var/local/natinst/log
SystemWebServer.log
core_dump.!usr!local!natinst!labview!lvrt
errlog.txt
lvlog01-20-20-21-27-51.txt
lvlog01-20-20-21-29-47.txt
lvlog01-20-20-21-35-13.txt
lvlog01-20-20-21-37-03.txt
lvrt_19.0_lvuser_cur.txt
lvrt_19.0_lvuser_log.txt
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Archive the dump file.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>admin@NI-cRIO-9036-01D5AED5:/var/local/natinst/log# tar -czf myCoreDump.tar.gz core_dump.<span class="se">\!</span>usr<span class="se">\!</span>local<span class="se">\!</span>natinst<span class="se">\!</span>labview<span class="se">\!</span>lvrt
admin@NI-cRIO-9036-01D5AED5:/var/local/natinst/log# ls
SystemWebServer.log
core_dump.!usr!local!natinst!labview!lvrt
errlog.txt
lvlog01-20-20-21-27-51.txt
lvlog01-20-20-21-29-47.txt
lvlog01-20-20-21-35-13.txt
lvlog01-20-20-21-37-03.txt
lvlog01-20-20-21-42-12.txt
lvlog01-20-20-21-42-33.txt
lvrt_19.0_lvuser_cur.txt
lvrt_19.0_lvuser_log.txt
myCoreDump.tar.gz
admin@NI-cRIO-9036-01D5AED5:/var/local/natinst/log#
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Copy the core dump archive to a host system via a supported file transfer method (FTP, sFTP, WebDAV, etc).</p></li>
<li><p>Generate an NI MAX Technical Support Report and include this when providing NI Support with the core dump.</p></li>
</ol>
</section>
<section id="confirming-core-dumps-are-generated">
<h3>Confirming Core Dumps are Generated<a class="headerlink" href="#confirming-core-dumps-are-generated" title="Permalink to this heading">¶</a></h3>
<p>To confirm core dumps are properly configured, it’s possible to force a crash of the LabVIEW Real-Time process for testing purposes.</p>
<ol class="arabic">
<li><p>Configure a target for Core Dumps as described above.</p></li>
<li><p>Open a terminal on the target (SSH or Serial) and log in as the admin user.</p></li>
<li><p>Run the following command:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>killall -3 lvrt
</pre></div>
</div>
<p>This command will send a SIGSEGV to the lvrt process.</p>
</div></blockquote>
</li>
<li><p>Confirm that the lvrt process crashed.</p>
<blockquote>
<div><p><strong>LabVIEW Real-Time &gt;= 23.1</strong></p>
<p>A message will be logged to the system log at <cite>/var/log/messages</cite> if a crash occurs.
Run the following command to confirm the crash was logged.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat /var/log/messages <span class="p">|</span> tail
</pre></div>
</div>
<p>This will show the last 10 messages logged.
If a crash occurred, the a message similer to the following should be present:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lvrt-daemon: The LabVIEW Real-Time Process has encountered an error. Check /var/local/natinst/log <span class="k">for</span> error logs.
</pre></div>
</div>
<p><strong>LabVIEW Real-Time &lt; 23.1</strong></p>
<p>Run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ps -aux <span class="p">|</span> grep lvrt
</pre></div>
</div>
<p>If lvrt crashed, there should be something similar to the following result, noting the CRASHED_AND_RESTART message:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">1707</span> admin      <span class="m">0</span>:00 <span class="o">{</span>lvrt-daemon<span class="o">}</span> /bin/sh /etc/init.d/lvrt-daemon
<span class="m">2408</span> admin      <span class="m">0</span>:00 /bin/su -- lvuser -l -c /etc/init.d/lvrt-wrapper CRASHED_AND_RESTART /var/run/lvrt_wrapper.pid <span class="nb">false</span>
<span class="m">2409</span> lvuser     <span class="m">0</span>:00 <span class="o">{</span>MainAppThread<span class="o">}</span> ./lvrt
<span class="m">2473</span> admin      <span class="m">0</span>:00 grep lvrt
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Confirm that a core dump is now present in <code class="docutils literal notranslate"><span class="pre">/var/local/natinst/log/</span></code>. The core dump should have a name similar to <code class="docutils literal notranslate"><span class="pre">core_dump.!usr!local!natinst!labview!lvrt</span></code>.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>admin@NI-cRIO-9036-01D5AED5:~# ls /var/local/natinst/log
SystemWebServer.log
core_dump.!usr!local!natinst!labview!lvrt
errlog.txt
lvlog01-20-20-21-27-51.txt
lvlog01-20-20-21-29-47.txt
lvlog01-20-20-21-35-13.txt
lvlog01-20-20-21-37-03.txt
lvrt_19.0_lvuser_cur.txt
lvrt_19.0_lvuser_log.txt
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Remove the core dump before proceeding to reproduce the actual crash.</p></li>
</ol>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">LabVIEW Core Dumps on Linux Real-Time</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#generating-a-core-dump">Generating a Core Dump</a><ul>
<li><a class="reference internal" href="#configuring-lvrt">Configuring LVRT</a><ul>
<li><a class="reference internal" href="#lvrt-23-1">LVRT &gt;= 23.1</a></li>
<li><a class="reference internal" href="#id1">LVRT &lt; 23.1</a></li>
</ul>
</li>
<li><a class="reference internal" href="#saving-a-core-dump">Saving a Core Dump</a></li>
<li><a class="reference internal" href="#confirming-core-dumps-are-generated">Confirming Core Dumps are Generated</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="logs.html"
                          title="previous chapter">Logs on NI Linux Real-Time Systems</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="pstore.html"
                          title="next chapter">Obtaining Kernel Logs from a Prior System Crash Via pstore</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>GitHub Source</h3>
    <ul class="this-page-menu">
      <li><a href="https://github.com/ni/nilrt-docs/"
            rel="nofollow">Source on GitHub</a></li>
      <li><a href="https://github.com/ni/nilrt-docs/blob/main/docs/source/troubleshooting/lvrt-crash-dumps.rst"
            rel="nofollow">Show Document Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="pstore.html" title="Obtaining Kernel Logs from a Prior System Crash Via pstore"
             >next</a> |</li>
        <li class="right" >
          <a href="logs.html" title="Logs on NI Linux Real-Time Systems"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">nilrt-docs 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="troubleshooting_index.html" >NI Linux Real-Time Debug Documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">LabVIEW Core Dumps on Linux Real-Time</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright NI.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.1.1.
    </div>
  </body>
</html>